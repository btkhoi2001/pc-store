extends ../layouts/default.pug

block main_content
    section.content-main
        .content-header
            h2.content-title Quản trị viên
        .card.mb-4
            header.card-header
                .row.gx-3
                    .col-lg-4.col-md-6.me-auto
                        input.form-control(value=search type='text' placeholder='Tìm kiếm...')
            .card-body
                .table-responsive
                    table.table.table-hover
                        thead
                            tr
                                th Tên
                                th Email
                                th Ngày tham gia
                                th Số điện thoại
                                th Địa chỉ
                        tbody
                            each user in users
                                tr
                                    td(width='25%')
                                        a.itemside(href='#')
                                            .left
                                                if user.avatarUrl === null
                                                    img.img-sm.img-avatar(src='/images/people/avatar-default.jpg' alt='Userpic')
                                                else                                    
                                                    img.img-sm.img-avatar(src=user.avatarUrl alt='Userpic')
                                            .info.pl-3
                                                h6.mb-0.title= user.fullName
                                                small.text-muted= `ID: #${user.id}`
                                    td(width='25%')= user.email
                                    td= user.createdAt
                                    td= user.phoneNumber
                                    td(width='30%')= user.address
        nav.float-end.mt-4(aria-label='Page navigation')
            ul.pagination
                if currentPage > 1
                    li.page-item
                        a.page-link(href=`?page=${currentPage - 1}`) Trước
                else 
                    li.page-item.disabled
                        a.page-link(href="#") Trước

                if totalPages == 1
                    li.page-item.active 
                        a.page-link(href="#") 1
                else if totalPages == 2
                    if currentPage == 1
                        li.page-item.active 
                            a.page-link(href="#") 1
                        li.page-item
                            a.page-link(href=`?page=2`) 2
                    else
                        li.page-item
                            a.page-link(href=`?page=1`) 1
                        li.page-item.active 
                            a.page-link(href="#") 2
                else
                    if currentPage <= 1
                        li.page-item.active 
                            a.page-link(href="#") 1
                        li.page-item
                            a.page-link(href=`?page=2`) 2
                        li.page-item
                            a.page-link(href=`?page=3`) 3
                    else if currentPage >= totalPages 
                        li.page-item
                            a.page-link(href=`?page=${totalPages - 2}`)= totalPages - 2
                        li.page-item
                            a.page-link(href=`?page=${totalPages - 1}`)= totalPages - 1
                        li.page-item.active 
                            a.page-link(href="#")= totalPages 
                    else
                        li.page-item
                            a.page-link(href=`?page=${currentPage - 1}`)= currentPage - 1
                        li.page-item.active
                            a.page-link(href="#")= currentPage
                        li.page-item 
                            a.page-link(href=`?page=${currentPage + 1}`)= currentPage + 1

                if currentPage >= totalPages
                    li.page-item.disabled
                        a.page-link(href="#") Sau
                else
                    li.page-item
                        a.page-link(href=`?page=${currentPage + 1}`) Sau                                                                                    